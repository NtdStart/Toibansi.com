{"version":3,"sources":["../../src/session/index.js"],"names":["session","require","MongoStore","db","config","init","process","env","NODE_ENV","secret","sessionSecret","resave","saveUninitialized","unset","store","mongooseConnection","Mongoose","connection","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,UAAWC,QAAQ,iBAAR,CAAf;AACA,IAAIC,aAAaD,QAAQ,eAAR,EAAyBD,OAAzB,CAAjB;AACA,IAAIG,KAAWF,QAAQ,aAAR,CAAf;AACA,IAAIG,SAAWH,QAAQ,WAAR,CAAf;;AAEA;;;;;AAKA,IAAII,OAAO,SAAPA,IAAO,GAAY;AACtB,KAAGC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA5B,EAA0C;AACzC,SAAOR,QAAQ;AACdS,WAAQL,OAAOM,aADD;AAEdC,WAAQ,KAFM;AAGdC,sBAAmB,KAHL;AAIdC,UAAO,SAJO;AAKdC,UAAO,IAAIZ,UAAJ,CAAe,EAAEa,oBAAoBZ,GAAGa,QAAH,CAAYC,UAAlC,EAAf;AALO,GAAR,CAAP;AAOA,EARD,MAQO;AACN,SAAOjB,QAAQ;AACdS,WAAQL,OAAOM,aADD;AAEdC,WAAQ,KAFM;AAGdE,UAAO,SAHO;AAIdD,sBAAmB;AAJL,GAAR,CAAP;AAMA;AACD,CAjBD;;AAmBAM,OAAOC,OAAP,GAAiBd,MAAjB","file":"index.js","sourcesContent":["'use strict';\r\n\r\nvar session \t= require('express-session');\r\nvar MongoStore\t= require('connect-mongo')(session);\r\nvar db \t\t    = require('../database');\r\nvar config \t\t= require('../config');\r\n\r\n/**\r\n * Initialize Session\r\n * Uses MongoDB-based session store\r\n *\r\n */\r\nvar init = function () {\r\n\tif(process.env.NODE_ENV === 'production') {\r\n\t\treturn session({\r\n\t\t\tsecret: config.sessionSecret,\r\n\t\t\tresave: false,\r\n\t\t\tsaveUninitialized: false,\r\n\t\t\tunset: 'destroy',\r\n\t\t\tstore: new MongoStore({ mongooseConnection: db.Mongoose.connection })\r\n\t\t});\r\n\t} else {\r\n\t\treturn session({\r\n\t\t\tsecret: config.sessionSecret,\r\n\t\t\tresave: false,\r\n\t\t\tunset: 'destroy',\r\n\t\t\tsaveUninitialized: true\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = init();"]}